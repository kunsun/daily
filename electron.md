## electron

1. 网络状态检测



#### 主进程和渲染进程

1. 主进程： 使用BrowserWindow模块创建并管理web页面
2. 渲染进程：不能直接操作与原生的GUI



#### 进程通信IPC   InterProcess Communication

一个Electron应用只有一个主进程。

1. 创建一个窗口
2. 传入URL

Electron中的每一个页面都有它自己的进程，叫做渲染进程。

> 主进程通过实例话BrowserWindow，每个BrowserWindow实例都在它自己的渲染进程内返回一个web页面。当BrowserWindow实例销毁时，相应的渲染进程也会终止。

ipcMain  ipcRenderer



app 控制应用程序的生命周期

`shell` 模块提供与桌面集成相关的功能。

1. 在文件管理器中显示文件
2. 打开指定的文件
3. 打开Url
4. 创建快捷链接

BrowserWindow

EventEmitter

1. ipcMain 它处理从渲染器进程（网页）发送出来的异步
2. ipcRenderer 从渲染进程 (web 页面) 发送同步或异步的消息到主进程， 也可以接收主进程回复的消息









[从浏览器多进程到JS单线程，JS运行机制最全面的一次梳理](https://segmentfault.com/a/1190000012925872)

1. 进程是CPU资源（指内存）分配的最小单位
2. 线程是CPU调度的最小单位（建立在进程基础上的）

浏览器包含哪些进程：

1. Browser进程
   1. 负责各个页面的管理
   2. 将Renderer进程绘制到用户界面中
   3. 网络资源的管理、下载
2. 浏览器渲染进程（浏览器内核，Renderer进程，内部是多线程的）：默认每个Tab页面一个进程，互不影响。主要作用为：
   1. 页面渲染
   2. 脚本执行（JS的执行）
   3. 事件处理（事件循环）

总结：**在浏览器中打开一个网页相当于新起了一个进程**

前端关注的是：**渲染进程**

重点来了：**浏览器的渲染进程是多线程的**

包含的线程：

1. GUI渲染线程
2. JS引擎线程（V8）（注：GUI渲染线程与JS引擎线程是互斥的）
3. 事件触发线程（事件循环机制）
4. 定时器触发线程
5. 异步http请求线程

**JS引擎是单线程的**，这一点的本质仍然未改变，Worker可以理解是浏览器给JS引擎开的外挂，专门用来解决那些大量计算问题。





在 Electron 应用中，`package.json`中的`main`脚本运行所在的进程被成为主进程，在主进程中运行的脚本通过创建 web 页面来展示用户界面。一个 Electron 应用总是有且只有一个主进程。由于 Electron 使用了 Chromium 来展示 web 页面，所以在 Chromium 的多进程架构也被使用到。每个 Electron 中的 web 页面运行在它自己的*渲染进程*中。在普通的浏览器中，web 页面通常在一个沙盒环境中运行，不被允许去接触原生的资源。然而 Electron 的用户在 Node.js 的 API 支持下可以在页面中和操作系统进行一些底层交互。



主进程使用`BrowseWindow`实例创建页面，每个`BrowseWindow`实例都在自己的渲染进程里运行页面。当一个`BrowseWindow`实例被销毁后，相应的渲染进程也会被终止。主进程管理所有的 web 页面和它们对应的渲染进程。每个渲染进程都是独立的，它至关心它所运行的 web 页面。



